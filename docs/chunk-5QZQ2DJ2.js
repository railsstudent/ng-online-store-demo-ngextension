import{i as N,k as Q,l as E,m as X,n as Y,o as T}from"./chunk-KR4XTD4H.js";import{Aa as d,Ca as B,D as w,E as b,K as M,Ka as g,Na as y,Oa as v,Pa as P,Qa as S,Ra as i,Sa as o,Ta as s,W as x,Xa as F,Y as m,Za as p,_a as _,d as $,db as u,e as z,fb as G,gb as H,hb as J,m as I,p as V,qa as q,r as A,s as O,va as R,xa as U,ya as W,yb as K}from"./chunk-YBSSHO5Y.js";var it=t=>[t],L=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=m({type:e,selectors:[["app-product"]],inputs:{product:"product"},standalone:!0,features:[u],decls:19,vars:7,consts:[[1,"container"],[1,"image-container"],["alt","image","width","100","height","100",3,"src"],["for","id"],["id","id","name","id"],["for","name"],["id","name","name","name"],[3,"routerLink"],["for","price"],["id","price","name","price"]],template:function(n,c){n&1&&(i(0,"div",0)(1,"div",1),s(2,"img",2),o(),i(3,"label",3)(4,"span",4),p(5,"Id: "),o(),i(6,"span"),p(7),o()(),i(8,"label",5)(9,"span",6),p(10,"Title: "),o(),i(11,"span")(12,"a",7),p(13),o()()(),i(14,"label",8)(15,"span",9),p(16,"Price: "),o(),i(17,"span"),p(18),o()()()),n&2&&(d(2),g("src",c.product.image,q),d(5),_(c.product.id),d(5),g("routerLink",G(5,it,c.product.id)),d(1),_(c.product.title),d(5),_(c.product.price))},dependencies:[N],styles:["div.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid black;padding:.5rem;height:calc(100% - 1rem)}div.image-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-bottom:.5rem}label[_ngcontent-%COMP%]:first-of-type{margin-bottom:10px}label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:inline-block}label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{color:#aaa;width:20%}label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:nth-of-type(2){width:80%}"],changeDetection:0});let t=e;return t})();function ot(t,e){t&1&&(i(0,"p"),p(1,"Loading featured products..."),o())}var rt=(t,e)=>e.id;function at(t,e){if(t&1&&s(0,"app-product",1),t&2){let r=e.$implicit;g("product",r)}}function ct(t,e){if(t&1&&P(0,at,1,1,"app-product",2,rt),t&2){let r=F();S(r)}}function pt(t,e){if(t&1&&(i(0,"h2"),p(1,"Featured Products"),o(),i(2,"div",0),y(3,ot,2,0,"p")(4,ct,2,0),o(),s(5,"hr")),t&2){let r=F();d(3),v(3,r.isLoading?3:4)}}var Z=(()=>{let e=class e{constructor(){this.products=U([]),this.isLoading=!1;let a=x(T);this.isLoading=!0;let n=a.getFeaturedProducts().pipe(b(()=>this.isLoading=!1));Y(this.products,n)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=m({type:e,selectors:[["app-feature-products"]],standalone:!0,features:[u],decls:1,vars:1,consts:[[1,"featured"],[1,"item",3,"product"],["class","item",3,"product"]],template:function(n,c){if(n&1&&y(0,pt,6,1),n&2){let f;v(0,(f=c.products())?0:-1,f)}},dependencies:[L],styles:["h2[_ngcontent-%COMP%], hr[_ngcontent-%COMP%]{margin-bottom:.5rem}div.featured[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-bottom:.75rem}div.featured[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{flex-basis:250px}"]});let t=e;return t})();function j(...t){let{normalizedSources:e,hasInitValue:r,operator:a,options:n}=dt(t),c=X(j,n?.injector);return r?E(O(e).pipe(a),{initialValue:n.initialValue,injector:c}):E(O(e).pipe(a),{injector:c,requireSync:!0})}function dt(t){if(!t||!t.length||typeof t[0]!="object")throw new TypeError("computedFrom needs sources");let e=typeof t[1]=="function";if(t.length==3&&!e)throw new TypeError("computedFrom needs pipeable operator as a second argument");e||t.splice(1,0,$);let[r,a,n]=t,c=n?.initialValue!==void 0;return{normalizedSources:Object.entries(r).reduce((C,[h,l])=>(R(l)?C[h]=Q(l,{injector:n?.injector}).pipe(M(W(l))):V(l)?C[h]=l.pipe(w()):C[h]=I(l).pipe(w()),C),Array.isArray(r)?[]:{}),operator:a,hasInitValue:c,options:n}}function st(t,e){t&1&&(i(0,"p"),p(1,"Loading products..."),o())}var lt=(t,e)=>e.category,mt=(t,e)=>e.id;function ut(t,e){if(t&1&&s(0,"app-product",1),t&2){let r=e.$implicit;g("product",r)}}function ft(t,e){if(t&1&&(i(0,"p"),p(1),H(2,"titlecase"),o(),i(3,"div",0),P(4,ut,1,1,"app-product",1,mt),o()),t&2){let r=e.$implicit;d(1),_(J(2,1,r.category)),d(3),S(r.products)}}function gt(t,e){if(t&1&&P(0,ft,6,3,null,null,lt),t&2){let r=F();S(r.categoryProducts())}}var tt=(()=>{let e=class e{constructor(){this.isLoading=!1;let a=x(T),n=x(B),c=[a.categories$,a.products$];this.isLoading=!0,this.categoryProducts=j(c,z(A(f=>{let C=f[0],h=f[1];return C.reduce((l,k)=>{let et=h.filter(({category:nt})=>nt===k);return l.concat({category:k,products:et})},[])}),b(()=>{this.isLoading=!1,n.markForCheck()}),M([])))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=m({type:e,selectors:[["app-product-list"]],standalone:!0,features:[u],decls:5,vars:1,consts:[[1,"products"],[3,"product"]],template:function(n,c){n&1&&(i(0,"h2"),p(1,"Catalogue"),o(),i(2,"div"),y(3,st,2,0,"p")(4,gt,2,0),o()),n&2&&(d(3),v(3,c.isLoading?3:4))},dependencies:[L,K],styles:["div.products[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-content:stretch}app-product[_ngcontent-%COMP%]{flex-basis:250px;height:300px;margin-bottom:1rem}"],changeDetection:0});let t=e;return t})();var Rt=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=m({type:e,selectors:[["app-product-catalogue"]],standalone:!0,features:[u],decls:2,vars:0,template:function(n,c){n&1&&s(0,"app-feature-products")(1,"app-product-list")},dependencies:[Z,tt],encapsulation:2,changeDetection:0});let t=e;return t})();export{Rt as ProductCatalogueComponent};
