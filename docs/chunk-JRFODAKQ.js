import{a as M}from"./chunk-OLBMHYGZ.js";import{a as b,b as N}from"./chunk-OM4BP7QK.js";import{l as H,m as E,n as J,o as K}from"./chunk-V75PI7OT.js";import{Aa as f,D,E as F,K as T,Ka as L,Na as x,Oa as v,Pa as y,Qa as P,Ra as a,Sa as c,Ta as d,W as C,Xa as S,Y as l,Za as m,_a as W,d as $,db as g,e as z,gb as B,hb as U,m as V,p as A,r as k,s as w,va as q,xa as h,ya as I,yb as G}from"./chunk-YBSSHO5Y.js";function tt(t,e){t&1&&(a(0,"p"),m(1,"Loading featured products..."),c())}var et=(t,e)=>e.id;function ot(t,e){if(t&1&&d(0,"app-product",1),t&2){let i=e.$implicit;L("product",i)}}function it(t,e){if(t&1&&y(0,ot,1,1,"app-product",2,et),t&2){let i=S();P(i)}}function nt(t,e){if(t&1&&(a(0,"h2"),m(1,"Featured Products"),c(),a(2,"div",0),x(3,tt,2,0,"p")(4,it,2,0),c(),d(5,"hr")),t&2){let i=S();f(3),v(3,i.isLoading()?3:4)}}var R=(()=>{let e=class e{constructor(){this.products=h([]),this.isLoading=h(!1);let n=C(M);this.isLoading.set(!0);let o=n.getFeaturedProducts().pipe(F(()=>this.isLoading.set(!1)));K(this.products,o)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=l({type:e,selectors:[["app-feature-products"]],standalone:!0,features:[g],decls:1,vars:1,consts:[[1,"featured"],[1,"item",3,"product"],["class","item",3,"product"]],template:function(o,r){if(o&1&&x(0,nt,6,1),o&2){let s;v(0,(s=r.products())?0:-1,s)}},dependencies:[b],styles:["h2[_ngcontent-%COMP%], hr[_ngcontent-%COMP%]{margin-bottom:.5rem}div.featured[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-bottom:.75rem}div.featured[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{flex-basis:250px}"]});let t=e;return t})();function j(...t){let{normalizedSources:e,hasInitValue:i,operator:n,options:o}=rt(t),r=J(j,o?.injector);return i?E(w(e).pipe(n),{initialValue:o.initialValue,injector:r}):E(w(e).pipe(n),{injector:r,requireSync:!0})}function rt(t){if(!t||!t.length||typeof t[0]!="object")throw new TypeError("computedFrom needs sources");let e=typeof t[1]=="function";if(t.length==3&&!e)throw new TypeError("computedFrom needs pipeable operator as a second argument");e||t.splice(1,0,$);let[i,n,o]=t,r=o?.initialValue!==void 0;return{normalizedSources:Object.entries(i).reduce((u,[_,p])=>(q(p)?u[_]=H(p,{injector:o?.injector}).pipe(T(I(p))):A(p)?u[_]=p.pipe(D()):u[_]=V(p).pipe(D()),u),Array.isArray(i)?[]:{}),operator:n,hasInitValue:r,options:o}}function at(t,e){t&1&&(a(0,"p"),m(1,"Loading products..."),c())}var ct=(t,e)=>e.category,pt=(t,e)=>e.id;function st(t,e){if(t&1&&d(0,"app-product",1),t&2){let i=e.$implicit;L("product",i)}}function dt(t,e){if(t&1&&(a(0,"p"),m(1),B(2,"titlecase"),c(),a(3,"div",0),y(4,st,1,1,"app-product",1,pt),c()),t&2){let i=e.$implicit;f(1),W(U(2,1,i.category)),f(3),P(i.products)}}function mt(t,e){if(t&1&&y(0,dt,6,3,null,null,ct),t&2){let i=S();P(i.categoryProducts())}}var X=(()=>{let e=class e{constructor(){this.isLoading=h(!1);let n=C(M),r=[C(N).categories$,n.products$];this.isLoading.set(!0),this.categoryProducts=j(r,z(k(s=>{let u=s[0],_=s[1];return u.reduce((p,O)=>{let Y=_.filter(({category:Z})=>Z===O);return p.concat({category:O,products:Y})},[])}),F(()=>this.isLoading.set(!1)),T([])))}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=l({type:e,selectors:[["app-product-list"]],standalone:!0,features:[g],decls:5,vars:1,consts:[[1,"products"],[3,"product"]],template:function(o,r){o&1&&(a(0,"h2"),m(1,"Catalogue"),c(),a(2,"div"),x(3,at,2,0,"p")(4,mt,2,0),c()),o&2&&(f(3),v(3,r.isLoading()?3:4))},dependencies:[b,G],styles:["div.products[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-content:stretch}app-product[_ngcontent-%COMP%]{flex-basis:250px;height:300px;margin-bottom:1rem}"],changeDetection:0});let t=e;return t})();var Vt=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=l({type:e,selectors:[["app-product-catalogue"]],standalone:!0,features:[g],decls:2,vars:0,template:function(o,r){o&1&&d(0,"app-feature-products")(1,"app-product-list")},dependencies:[R,X],encapsulation:2,changeDetection:0});let t=e;return t})();export{Vt as ProductCatalogueComponent};
